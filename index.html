<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Поиск игры</title>
<style>
  body {
    font-family: Arial, sans-serif;
  }
  #search-form {
    margin: 20px;
  }
</style>
</head>
<body>
  <h1>Поиск игры</h1>
  <form id="search-form">
    <label for="game-name">Введите часть названия игры:</label>
    <input type="text" id="game-name" required>
    <button type="submit">Поиск</button>
  </form>
  <div id="result" style="display: none;"></div>

  <script>
    document.getElementById("search-form").addEventListener("submit", function(event) {
      event.preventDefault();
      
      const gameName = document.getElementById("game-name").value.toLowerCase();

      fetch("bd.json")
        .then(response => response.json())
        .then(data => {
          const matchingGames = data.filter(item => item["Название новеллы"].toLowerCase().includes(gameName));
          
          if (matchingGames.length > 0) {
            displayMatchingGames(matchingGames);
          } else {
            document.getElementById("result").style.display = "none";
            alert("Игры не найдены");
          }
        })
        .catch(error => {
          console.error("Ошибка при загрузке данных:", error);
        });
    });

    function displayMatchingGames(matchingGames) {
      const resultDiv = document.getElementById("result");
      resultDiv.style.display = "block";
      resultDiv.innerHTML = "";

      matchingGames.forEach(game => {
        const gameDiv = document.createElement("div");
        gameDiv.className = "game";

        for (const key in game) {
          if (game.hasOwnProperty(key)) {
            const value = game[key];
            const keyValueElement = document.createElement("p");
            keyValueElement.textContent = `${key}: ${value}`;
            gameDiv.appendChild(keyValueElement);
          }
        }

        resultDiv.appendChild(gameDiv);
      });
    }
  </script>
</body>
</html>
